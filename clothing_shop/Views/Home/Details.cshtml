@model Shop_Models.ViewModels.DetailsVM
@using Shop_Utility

<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="~/css/site.css" />
</head>
<body>
    <form method="post">
        <input asp-for="@Model.Product.Id" hidden />
        <div class="return-link">
            <a asp-action="Index">
                <svg xmlns="http://www.w3.org/2000/svg" width="19" height="19" viewBox="0 0 19 19" fill="none">
                    <g clip-path="url(#clip0_60_2)">
                        <rect width="19" height="19" fill="white" />
                        <line x1="0.53033" y1="0.46967" x2="18.5303" y2="18.4697" stroke="black" stroke-width="1.5" />
                        <line x1="18.5303" y1="0.53033" x2="0.530328" y2="18.5303" stroke="black" stroke-width="1.5" />
                    </g>
                    <defs>
                        <clipPath id="clip0_60_2">
                            <rect width="19" height="19" fill="white" />
                        </clipPath>
                    </defs>
                </svg>
            </a>
        </div>
        <div class="product-container">
            
            <div class="product-image">
                <img src="@WC.ImagePath@Model.Product.Image" width="100%">
            </div>
            <div class="product-description">
                <div class="row align-center">
                    <div class="product-details column medium-6 center-text-for-small-only">
                        <h2>@Model.Product.ProductName</h2>
                        <p class="product-description">@Model.Product.ProductDescription</p>

                        <div class="product-details-add-to-cart">
                            
                            @{
                                int priceAsInt = (int)Model.Product.Price;
                                int availableQty = 0;
                            }
                            <p class="price">€@priceAsInt</p>
                            <div class="column small-12 large-6">
                                <h6 class="product-color-title">Size</h6>
                                <select asp-for="@Model.Size.Id" class="form-control">
                                    @foreach (var size in Model.SizeSelectList)
                                    {
                                        int sizeId = Convert.ToInt32(size.Value);
                                        availableQty = Model.AvailableQuantities.ContainsKey(sizeId) ? Model.AvailableQuantities[sizeId] : 0;

                                        <option value="@size.Value" data-available-qty="@availableQty">
                                            @size.Text
                                            @if (availableQty <= 10)
                                            {
                                                <span>(only @availableQty left in stock)</span>
                                            }
                                        </option>
                                    }
                                </select>
                                <br />
                                <span>Qty:</span> 
                                <select asp-for="Product.TempQty" class="qty">
                                    @for (int i = 1; i <= 10; i++)
                                    {
                                        <option value="@i">@i</option>
                                    }
                                </select>
                                <span asp-validation-for="@Model.Product.TempQty" class="text-danger"></span>
                                <span class="error-message text-danger"></span>
                            </div>
                            <br />
                            <button type="submit" id="addToCartBtn" asp-route-id="@Model.Product.Id" class="btn btn-dark form-control">Add to Cart</button>

                            
                            
                        </div>

                    </div>
                </div>
            </div>
        </div>

    </form>
</body>
</html>


@section Scripts {
    <script type="text/javascript" src="~/js/homeDetails.js"></script>
}